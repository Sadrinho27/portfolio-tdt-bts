import{j as i}from"./index-e422a01a.js";import{r as e}from"./framer-901699ae.js";import{_ as p,a as y,C as P,P as z,i as M}from"./Preload-de65d1fa.js";import{R as w,w as j,ak as m,n as U,V as C}from"./three-2a4309b7.js";const F=()=>parseInt(w.replace(/\D+/g,"")),_=F(),x=_>=154?"opaque_fragment":"output_fragment";class I extends j{constructor(a){super(a),this.onBeforeCompile=(t,o)=>{const{isWebGL2:s}=o.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${x}>`,`
        ${s?`#include <${x}>`:`#extension GL_OES_standard_derivatives : enable
#include <${x}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${_>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const W=e.forwardRef((r,a)=>{const[t]=e.useState(()=>new I(null));return e.createElement("primitive",p({},r,{object:t,ref:a,attach:"material"}))});let c,d;const $=e.createContext(null),S=new U,A=new C,k=e.forwardRef(({children:r,range:a,limit:t=1e3,...o},s)=>{const n=e.useRef(null);e.useImperativeHandle(s,()=>n.current,[]);const[l,f]=e.useState([]),[[u,g,b]]=e.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);e.useEffect(()=>{n.current.geometry.attributes.position.needsUpdate=!0}),y(()=>{for(n.current.updateMatrix(),n.current.updateMatrixWorld(),S.copy(n.current.matrixWorld).invert(),n.current.geometry.drawRange.count=Math.min(t,a!==void 0?a:t,l.length),c=0;c<l.length;c++)d=l[c].current,d.getWorldPosition(A).applyMatrix4(S),A.toArray(u,c*3),n.current.geometry.attributes.position.needsUpdate=!0,d.matrixWorldNeedsUpdate=!0,d.color.toArray(g,c*3),n.current.geometry.attributes.color.needsUpdate=!0,b.set([d.size],c),n.current.geometry.attributes.size.needsUpdate=!0});const v=e.useMemo(()=>({getParent:()=>n,subscribe:E=>(f(h=>[...h,E]),()=>f(h=>h.filter(R=>R.current!==E.current)))}),[]);return e.createElement("points",p({userData:{instances:l},matrixAutoUpdate:!1,ref:n,raycast:()=>null},o),e.createElement("bufferGeometry",null,e.createElement("bufferAttribute",{attach:"attributes-position",count:u.length/3,array:u,itemSize:3,usage:m}),e.createElement("bufferAttribute",{attach:"attributes-color",count:g.length/3,array:g,itemSize:3,usage:m}),e.createElement("bufferAttribute",{attach:"attributes-size",count:b.length,array:b,itemSize:1,usage:m})),e.createElement($.Provider,{value:v},r))}),D=e.forwardRef(({children:r,positions:a,colors:t,sizes:o,stride:s=3,...n},l)=>{const f=e.useRef(null);return e.useImperativeHandle(l,()=>f.current,[]),y(()=>{const u=f.current.geometry.attributes;u.position.needsUpdate=!0,t&&(u.color.needsUpdate=!0),o&&(u.size.needsUpdate=!0)}),e.createElement("points",p({ref:f},n),e.createElement("bufferGeometry",null,e.createElement("bufferAttribute",{attach:"attributes-position",count:a.length/s,array:a,itemSize:s,usage:m}),t&&e.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/s,array:t,itemSize:3,usage:m}),o&&e.createElement("bufferAttribute",{attach:"attributes-size",count:o.length/s,array:o,itemSize:1,usage:m})),r)}),G=e.forwardRef((r,a)=>r.positions instanceof Float32Array?e.createElement(D,p({},r,{ref:a})):e.createElement(k,p({},r,{ref:a}))),N=1500,V=()=>{const r=e.useRef({rotation:{x:0,y:0,z:Math.PI/4}}),a=M(new Float32Array(N*3),{radius:1.2});return y((t,o)=>{r.current.rotation.x-=o/10,r.current.rotation.y-=o/15}),i.jsx("group",{rotation:[0,0,Math.PI/4],children:i.jsx(G,{ref:r,positions:a,stride:3,frustumCulled:!0,children:i.jsx(W,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},O=()=>i.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none",children:i.jsxs(P,{camera:{position:[0,0,1]},children:[i.jsx(e.Suspense,{fallback:null,children:i.jsx(V,{})}),i.jsx(z,{all:!0})]})});export{O as default};
